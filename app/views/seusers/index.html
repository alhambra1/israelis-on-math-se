<!doctype html>
<head>
  <meta charset="UTF-8">
  <title>StackExchange Users</title>
  <style>
    .user {
      margin: 10px;
      padding: 6px;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div ng-app="app">
    <div ng-controller="IndexController as ctrl">
      <h2>Math.StackExchange Users with Location Matching 'israel'</h2>
      <p>Page size: <input ng-model="ctrl.pageSize" /> <button ng-click="ctrl.getStackExchangeUsers()">Go</button></p>
      Current page: <input type="text" ng-model="ctrl.currentPage" ng-change="ctrl.paginate()" />
      <p><button ng-click="ctrl.prevPage()">Prev Page</button> <button ng-click="ctrl.nextPage()">Next Page</button></p>
      <div class="user" ng-repeat="user in ctrl.pagedUsers">
        <div ng-repeat="(key, value) in user">
          <span> {{key}} </span> <span> {{ value }} </span>
        </div>
      </div>
      <p ng-hide="ctrl.filteredUsers.length">No matches for that location.</p>
    </div>
  </div>

  <script src="js/angular.min.js"></script>
  <script type="text/javascript" charset="utf-8">
    angular
      .module('app',[])
      .controller('IndexController',function($http){
        var ctrl = this;
  
        ctrl.pageSize = 100;
        ctrl.currentPage = 1;
             
        ctrl.prevPage = function(){
          if (ctrl.currentPage > 1){ 
            ctrl.currentPage--;
            ctrl.paginate();
          }
        }
        
        ctrl.nextPage = function(){
          if (ctrl.users.length > ctrl.currentPage * ctrl.pageSize){ 
            ctrl.currentPage++;
            ctrl.paginate();
          }
        }
        
        ctrl.paginate = function(){
          ctrl.pagedUsers = ctrl.users.slice((ctrl.currentPage - 1) * ctrl.pageSize,ctrl.pageSize);
        }
        
        $http.get('/seusers/index.json').then(function(resp){
          ctrl.users = resp.data;
          ctrl.paginate();
        });
      });
  </script>
</body>
</html>
